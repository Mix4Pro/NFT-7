"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2331],{50407:function(e,t,i){i.d(t,{Z:function(){return b}});var n=i(59499),o=i(4730),r=i(11163),a=i(67294),s=i(32125),c=i(67670),d=i(23655),l=i(95729),p=i(14617),u=i(79111),x=i(54444),h=i(89884),f=i(85893);const g=["exhibit"];function m(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function y(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?m(Object(i),!0).forEach((function(t){(0,n.Z)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):m(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function b({toggle:e,isShowing:t}){var i;const{0:n,1:s}=(0,a.useState)(""),m=(0,a.useContext)(p.St),{exhibit:b}=m,_=(0,o.Z)(m,g),{0:P,1:z}=(0,a.useState)(!1),{0:O,1:S}=(0,a.useState)(!1),{0:L,1:Z}=(0,a.useState)(!1);(0,r.useRouter)();return(0,f.jsx)(h.default,{hasBackground:!0,toggle:e,isShowing:t,isBackdrop:!0,style:{background:"#fff",borderRadius:3,maxWidth:500},noShowClose:!0,wide:!0,children:(0,f.jsxs)(w,{children:[(0,f.jsxs)(k,{children:[(0,f.jsx)("span",{onClick:e,style:{cursor:"pointer"},children:(0,f.jsx)(x.Z,{name:"close",width:"18px"})}),(0,f.jsx)("div",{children:(0,f.jsx)("h2",{"data-cy":"lets-share",children:"Custom domain "})}),(0,f.jsx)("div",{})]}),(0,f.jsxs)(j,{children:[(0,f.jsx)(u.II,{maxLength:"45",style:{fontSize:"15px",height:"42px",color:"#000",background:"#f9f9f9"},value:"https://oncyber.io/"+((null===b||void 0===b||null===(i=b.info)||void 0===i?void 0:i.customLink)||""),onChange:e=>{let t=e.target.value.toLowerCase().replace("https://oncyber.io/","").replace("https://oncyber.io","").replace(/\s/,"-");encodeURIComponent(t)===t&&(e=>{const t=y(y({},null===b||void 0===b?void 0:b.info),e);_.dispatch({type:p.yz,payload:{info:t}})})({customLink:t})},type:"text",placeholder:"Insert hot title","data-cy":"custom-link-modal-input"}),(0,f.jsx)("button",{disabled:L,onClick:async function(){if(s(""),Z(!0),!b.info.customLink)return void Z(!1);if(b.info.customLink.includes("@"))return Z(!1),s("The path can't contain @.");if(b.info.customLink.includes("/")||b.info.customLink.includes("\\"))return Z(!1),s("The path can't contain /.");const e=function(e){let t;try{t=new URL("http://localhost:3000/".concat(e))}catch(i){return!1}return t.pathname}(b.info.customLink);if(!e)return s("Please enter a valid pathname. e.g. my-cool-exhibit");const t=await(0,l.$O)(_.token,_.user.id,b.id,e.split("/")[1]);Z(!1),t.success?(S(!0),(0,l.M6)(b.id,y(y({},b.info),{},{info:e.split("/")[1]}),_.token)):s(t.message)},"data-cy":"custom-link-save",children:L?"Loading...":"Save"})]}),(0,f.jsxs)(v,{children:[!n&&!O&&(0,f.jsx)("p",{children:"Fill the input above to customise your public link :)"}),n?(0,f.jsx)("p",{style:{color:"red"},children:n}):null,O?(0,f.jsx)("p",{children:"You may now share it with the world!"}):null]}),(0,f.jsxs)(I,{children:[(0,f.jsxs)(C,{href:"/spaces/".concat(b.id,"/recorder"),target:"_blank",onClick:()=>{(0,c.Y3)("open_screenshot_studio",{exhibitId:b.id})},children:[(0,f.jsx)(x.Z,{width:16,name:"camera"}),(0,f.jsx)("p",{children:" \xa0Take Screenshots"})]}),(0,f.jsx)(C,{onClick:()=>{var e;(0,d.co)().logEvent("click_copy_link",{user_id:null===_||void 0===_||null===(e=_.user)||void 0===e?void 0:e.id}),navigator.clipboard.writeText((()=>{var e;return null!==b&&void 0!==b&&null!==(e=b.info)&&void 0!==e&&e.customLink?"https://oncyber.io/".concat(b.info.customLink):"https://oncyber.io/spaces/".concat(b.id)})()),z(!0),setTimeout((()=>{z(!1)}),1e3)},children:P?(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(x.Z,{width:16,name:"check"}),(0,f.jsx)("p",{children:" Copied ! \xa0"})]}):(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(x.Z,{width:16,name:"copy-link"}),(0,f.jsx)("p",{children:"Copy Link"})]})})]})]})})}const w=s.ZP.div.withConfig({displayName:"CustomLink__Container",componentId:"sc-1y3zpc9-0"})(["background:white;padding:8px 32px;z-index:30;color:black;& > p{font-size:13px;}@media (max-width:600px){padding:8px 16px;p{font-size:14px;}}"]),v=s.ZP.div.withConfig({displayName:"CustomLink__FeedbackMessage",componentId:"sc-1y3zpc9-1"})(["text-align:center;font-size:14px;opacity:0.9;"]),j=s.ZP.div.withConfig({displayName:"CustomLink__Group",componentId:"sc-1y3zpc9-2"})(["display:grid;grid-template-columns:3fr 1fr;margin:32px 0 8px 0;align-items:center;p{margin:0;margin-right:5px;font-size:15px;opacity:0.8;}button{background:#00ffd4;color:#000;padding:7px 14px;border:2px solid #00ffd4;border-radius:0px 3px 3px 0;max-width:150px;border-left:0;height:42px;cursor:pointer;transition:0.2s;font-weight:500;font-size:15px;&:hover{border:2px solid #147867;border-left:0;background:#147867;color:white;}}@media (max-width:600px){p{font-size:16px;}input{font-size:14px !important;padding:4px;}button{font-size:13px;}}"]),k=s.ZP.div.withConfig({displayName:"CustomLink__Header",componentId:"sc-1y3zpc9-3"})(["padding:8px 0;margin-bottom:24px;border-bottom:1px solid #eee;display:grid;grid-template-columns:1fr 2fr 1fr;align-items:center;h2{margin:0;margin-left:10px;font-weight:600;}img{width:32px;}& > div{display:flex;align-items:center;}@media (max-width:800px){padding:8px 0;img{width:32px;}grid-template-columns:1fr 4fr 1fr;& > span{img{width:14px;}}h2{font-size:22px;}}"]),C=(s.ZP.div.withConfig({displayName:"CustomLink__Row",componentId:"sc-1y3zpc9-4"})(["display:grid;justify-content:flex-start;& > div{display:flex;flex-direction:column;justify-content:space-between;padding:8px 0 16px 0;}"]),s.ZP.a.withConfig({displayName:"CustomLink__Button",componentId:"sc-1y3zpc9-5"})(["margin:8px 0;background:rgb(22,22,22);transition:0.2s;color:white;outline:none;padding:12px 16px;border:1px solid #dadce0;border-radius:3px;transition:0.4s;outline:none;font-size:12px;cursor:pointer;width:100%;display:flex;align-items:center;text-align:center;justify-content:center;img{width:30px;margin-right:8px;filter:invert(1);}p{margin:0;font-size:14px;}&:hover{background:#161616;color:white;}@media (max-width:600px){font-size:12px;padding:10px;p{font-size:13px;}}"]),s.ZP.a.withConfig({displayName:"CustomLink__RecordingButton",componentId:"sc-1y3zpc9-6"})(["border:1px solid #dadce0;color:black;border-radius:3px;padding:8px 16px;transition:0.2s;outline:none;font-size:13px;cursor:pointer;outline:none;width:100%;display:flex;align-items:center;text-align:center;justify-content:center;& > div{display:flex;align-items:center;}p{margin:0;font-size:14px;}img{margin-right:8px;margin-top:2px;}&:hover{background:#f1f3f4;}@media (max-width:600px){font-size:12px;display:none;padding:10px;}"])),I=(s.ZP.div.withConfig({displayName:"CustomLink__RedCircle",componentId:"sc-1y3zpc9-7"})(["width:15px;height:15px;border-radius:20px;background:red;margin-right:15px;"]),s.ZP.div.withConfig({displayName:"CustomLink__Footer",componentId:"sc-1y3zpc9-8"})(["display:grid;grid-template-columns:1fr 1fr;grid-gap:14px;align-items:center;justify-content:space-between;font-size:13px;padding:4px 0 16px 0;a{cursor:pointer;}@media (max-width:600px){font-size:12px;grid-gap:0;grid-template-columns:1fr;}"]))},28364:function(e,t,i){i.d(t,{Z:function(){return j}});var n=i(59499),o=i(4730),r=i(67294),a=i(32125),s=i(95729),c=i(14617),d=i(54444),l=i(89884),p=i(91863),u=i(79111),x=i(11163),h=i(3283),f=i.n(h),g=i(67670),m=i(85893);const y=["artworks"];function b(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function w(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?b(Object(i),!0).forEach((function(t){(0,n.Z)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):b(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function v(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!==typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}function j({toggle:e,isShowing:t}){const{0:i,1:n}=(0,r.useState)(""),{0:a,1:h}=(0,r.useState)(null),{0:b,1:j}=(0,r.useState)(!1),{0:N,1:T}=(0,r.useState)(""),{0:F,1:E}=(0,r.useState)(!1),{0:B,1:R}=(0,r.useState)(!1),{0:D,1:A}=(0,r.useState)(!1),{0:W,1:U}=(0,r.useState)([]),{0:Y,1:M}=(0,r.useState)({}),{exhibit:G,user:K,token:H,accounts:J}=(0,r.useContext)(c.St),V=((0,x.useRouter)(),()=>i);return(0,m.jsx)(l.default,{hasBackground:!0,toggle:e,isBackdrop:!0,isShowing:t,style:{background:"#fff",borderRadius:3},noShowClose:!0,wide:!0,children:(0,m.jsxs)(k,{children:[(0,m.jsxs)(_,{children:[(0,m.jsx)("h3",{children:"Collaborate"}),(0,m.jsx)("span",{"data-cy":"close-invite-modal",onClick:e,style:{cursor:"pointer"},children:(0,m.jsx)(d.Z,{name:"close",width:"15px"})})]}),(0,m.jsx)("p",{children:"We\u2019ll generate a custom link that you can share with your invitee."}),(0,m.jsxs)("div",{children:[(0,m.jsx)("h5",{children:"Select a responsibility"}),(0,m.jsxs)(P,{children:[(0,m.jsxs)("div",{onClick:()=>{A(!1),R(!1)},style:D||B?null:{background:"#000",color:"#fff"},children:[(0,m.jsx)("img",{src:"/images/icons/collaborator.png"}),(0,m.jsx)("h4",{children:"Co-curator"}),(0,m.jsx)("p",{children:"Invite someone into your space to hang their NFTs"})]}),(0,m.jsxs)("div",{onClick:()=>{A(!1),R(!0)},style:!D&&B?{background:"#000",color:"#fff"}:null,children:[(0,m.jsx)("img",{src:"/images/icons/delegated.png"}),(0,m.jsx)("h4",{children:"Delegator"}),(0,m.jsx)("p",{children:"Invite someone to share their NFTs for you to place."})]}),(0,m.jsxs)("div",{onClick:e=>{R(!1),A(!0),async function(){const e=K.id,{[e]:t}=J,i=(0,o.Z)(J,[e].map(v)),n=await fetch("/api/user/validateAll",{credentials:"include",method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({accounts:i})}),r=await n.json();r.success&&U(r.validatedAccounts)}()},style:!B&&D?{background:"#000",color:"#fff"}:null,children:[(0,m.jsx)("img",{src:"/images/icons/curator.png"}),(0,m.jsx)("h4",{children:"Admin curator"}),(0,m.jsx)("p",{children:"Invitee gets access to your NFTs, can invite other people, update space metadata..."})]})]}),(0,m.jsx)(z,{})]}),!B&&D&&W.length?(0,m.jsxs)("div",{children:[(0,m.jsx)("h5",{children:"Share other wallets' assets "}),(0,m.jsx)(C,{children:W.map((e=>e===K.id?null:(0,m.jsxs)(I,{active:!!Y[e],children:[(0,m.jsx)("input",{checked:!!Y[e],value:Y[e]||"",onChange:t=>M((t=>t[e]?(delete t[e],w({},t)):w(w({},t),{},{[e]:!0}))),id:"account-".concat(e),type:"checkbox"}),(0,m.jsxs)("label",{htmlFor:"account-".concat(e),children:[e.slice(0,8),"...",e.slice(e.length-5,e.length-1)]})]},e)))})]}):null,(0,m.jsxs)(O,{children:[(0,m.jsx)(u.II,{maxLength:"60",value:N,onChange:e=>T(e.target.value),placeholder:"Guest ENS or wallet address (0x, tz...)","data-cy":"invite-input"}),(0,m.jsx)(S,{disabled:F,onClick:async function(){var e,t;E(!0);const{artworks:i}=G,r=(0,o.Z)(G,y),a="t"!=N[0]?await async function(){try{var e=new(f())("https://mainnet.infura.io/v3/85785677004c47b2b33a41a174e1a775");const t=await e.eth.ens.getAddress(N);if(t)return t}catch(t){return N}return N}():N;let c="collaborate";const d=D;if(D&&(c="curate"),B&&(c="delegate"),d&&(c="admin-curate"),(0,g.Y3)("invite_to_collab",{invitedUser:a,invitedByCurator:(null===K||void 0===K?void 0:K.id)!==G.owner,ownerId:null===K||void 0===K?void 0:K.id,selfInvite:!(null===J||void 0===J||!J[a.toLowerCase()]),exhibitOwnerId:null===G||void 0===G?void 0:G.owner,exhibitName:null===G||void 0===G||null===(e=G.info)||void 0===e?void 0:e.headline,collabs:(null===G||void 0===G||null===(t=G.editors)||void 0===t?void 0:t.length)>1,number_of_artworks:Object.keys((null===G||void 0===G?void 0:G.artworks)||{}).length,inviteType:c,otherOwners:Object.keys(Y)}),a){if(a.toLocaleLowerCase()===K.id.toLocaleLowerCase())return h("You can't invite yourself"),void E(!1);try{const e=await(0,s.YL)(a,K.id,r,B,H,D,Object.keys(Y),d);if(!e.success)return void h(e.message);n("".concat(p.r.PUBLIC_API,"/create?inviteId=").concat(e.inviteId,"&walletId=").concat(a.toLowerCase())),null!==J&&void 0!==J&&J[a.toLowerCase()]&&(window.location="".concat(p.r.PUBLIC_API,"/create?inviteId=").concat(e.inviteId,"&walletId=").concat(a.toLowerCase()))}catch(l){console.error(l),h("Failed to create invite link. Please contact support")}finally{E(!1)}}},children:F?"Loading...":"Create Link"})]}),i&&!F?(0,m.jsx)(m.Fragment,{children:(0,m.jsxs)(L,{children:[(0,m.jsx)("p",{children:i}),(0,m.jsx)("button",{onClick:async()=>{const e=V();navigator.clipboard?await navigator.clipboard.writeText(e):function(e){var t=document.createElement("textarea");t.value=e,t.style.top="0",t.style.left="0",t.style.position="fixed",document.body.appendChild(t),t.focus(),t.select();try{document.execCommand("copy")}catch(i){console.error("Failed to copy",i)}document.body.removeChild(t)}(e),j(!0),setTimeout((()=>{j(!1)}),1e3)},children:b?(0,m.jsx)("p",{children:" WAGMI"}):(0,m.jsx)("p",{children:"COPY LINK"})})]})}):null,a&&!F?(0,m.jsx)(m.Fragment,{children:(0,m.jsx)(Z,{children:a})}):null]})})}const k=a.ZP.div.withConfig({displayName:"Invite__Container",componentId:"sc-156ya7j-0"})(["padding:24px 32px;h4{font-weight:500;margin-bottom:8px;font-weight:bold;font-size:14px;line-height:12px;}h5{margin-bottom:8px;}@media (max-width:600px){padding:24px;}"]),C=a.ZP.div.withConfig({displayName:"Invite__AccountsWrapper",componentId:"sc-156ya7j-1"})(["display:grid;grid-template-columns:1fr 1fr 1fr 1fr;@media (max-width:800px){grid-template-columns:1fr 1fr 1fr;}"]),I=a.ZP.div.withConfig({displayName:"Invite__AccountWrapper",componentId:"sc-156ya7j-2"})(["display:flex;align-items:center;margin:4px 0;cursor:pointer;opacity:",";font-size:12px;"],(({active:e})=>e?1:.4)),_=a.ZP.div.withConfig({displayName:"Invite__Header",componentId:"sc-156ya7j-3"})(["padding:6px 0;display:flex;align-items:center;justify-content:space-between;font-style:normal;h3{margin:0;font-weight:bold;font-size:30px;line-height:24px;}"]),P=a.ZP.div.withConfig({displayName:"Invite__ResponsibilityWrapper",componentId:"sc-156ya7j-4"})(["display:grid;grid-template-columns:1fr 1fr 1fr;width:95%;& > div{padding:4px 6px;cursor:pointer;font-style:normal;font-weight:normal;font-size:8px;text-align:center;border:1px solid #bcbcbc;&:not(:last-child){margin-right:8px;}& > img{width:30px;margin:8px 0;}& > h4{margin:4px 0 8px 0;font-size:14px;font-weight:500;}& > p{margin:4px 2px 8px 2px;font-size:11px;}}@media (max-width:600px){width:100%;}"]),z=a.ZP.div.withConfig({displayName:"Invite__LearnModeWrapper",componentId:"sc-156ya7j-5"})(["font-style:normal;font-weight:bold;font-size:12px;line-height:7px;text-align:right;text-decoration:underline;margin-top:12px;margin-bottom:18px;"]),O=(a.ZP.div.withConfig({displayName:"Invite__CheckboxWrapper",componentId:"sc-156ya7j-6"})(["display:flex;align-items:center;font-size:14px;margin-top:4px;opacity:0.8;"]),a.ZP.p.withConfig({displayName:"Invite__Paragraph",componentId:"sc-156ya7j-7"})(["font-size:13px;opacity:0.9;padding:8px 0;color:#4a4a4a;@media (max-width:800px){font-size:11px;}"]),a.ZP.div.withConfig({displayName:"Invite__InputWrapper",componentId:"sc-156ya7j-8"})(["display:flex;align-items:center;padding:8px 0;input{height:50px;font-size:15px;}button{background:#000;color:#fff;height:52px;padding:7px 14px;border:2px solid #000;border-left:0;font-weight:500;&:hover{border:2px solid #424242;border-left:0;background:#424242;}}@media (max-width:760px){flex-direction:column;button{margin-top:12px;width:100% !important;margin-left:0;}}"])),S=a.ZP.button.withConfig({displayName:"Invite__Button",componentId:"sc-156ya7j-9"})(["background:#000;color:#fff;padding:7px 14px;border:1px solid #000;border-radius:5px;width:150px;height:45px;cursor:pointer;transition:0.2s;font-weight:400;font-size:15px;&:hover{background:rgba(0,0,0,0.8);}"]),L=(a.ZP.div.withConfig({displayName:"Invite__Title",componentId:"sc-156ya7j-10"})(["img{width:38px;}h2{margin:0;}display:flex;align-items:center;"]),a.ZP.div.withConfig({displayName:"Invite__LinkWrapper",componentId:"sc-156ya7j-11"})(["display:flex;justify-content:space-between;font-size:13px;padding:14px 16px;margin:14px 0;margin-top:16px;background:#f9f9f9;p{user-select:all;margin:0;max-width:350px;font-size:16px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;}border:2px solid #f2eee8;button{border:none;background:transparent;user-select:none;-webkit-user-select:none;font-weight:500;margin:0;font-size:14px;cursor:pointer;white-space:nowrap;transition:0.2s;color:#16d9b8;p{margin:0;}&:hover{opacity:0.8;}}"])),Z=a.ZP.p.withConfig({displayName:"Invite__ErrorMsg",componentId:"sc-156ya7j-12"})(["color:red;"])},22248:function(e,t,i){i.d(t,{Z:function(){return p}});var n=i(67294),o=i(32125),r=i(23655),a=i(95729),s=i(14617),c=i(79111),d=i(89884),l=i(85893);function p({isShowing:e,toggle:t,walletId:i}){const{token:o,exhibit:p,dispatch:x,user:h}=(0,n.useContext)(s.St),{0:f,1:g}=(0,n.useState)(!1),{0:m,1:y}=(0,n.useState)("");return(0,l.jsx)(d.default,{hasBackground:!0,isBackdrop:!0,toggle:t,isShowing:e,style:{background:"#fff",borderRadius:10},noShowClose:!0,wide:!0,children:(0,l.jsxs)(u,{children:[m?(0,l.jsx)("p",{style:{color:"red"},children:m}):null,(0,l.jsx)("h2",{children:"Are you sure you want to cancel the invite?"}),(0,l.jsxs)("p",{children:["All assets placed by ",i," will be taken off."]}),(0,l.jsx)("br",{}),(0,l.jsx)(c.zx,{disabled:f,onClick:async function(){g(!0),y("");const e=await(0,a.UF)(o,i,p.id);if(e.success){x({type:s.VR,payload:e.exhibit});const n=[];Object.keys(p.artworks).forEach((e=>{p.artworks[e].addedBy===i.toLowerCase()&&n.push(e)})),r.Fs.ref("/exhibits/"+p.id).push({type:"USER_KICKED",editorId:i,walletId:h.id,timestamp:(new Date).getTime()+1e4,artworksToDelete:n}),t()}else y(e.message);g(!1)},children:f?"Proceeding...":"Proceed"})]})})}const u=o.ZP.div.withConfig({displayName:"InviteCancel__Container",componentId:"sc-45h24i-0"})(["padding:24px;display:flex;flex-direction:column;h2{margin:0;}p{word-break:break-all;color:#545454;}button{color:#fff;background:#000;font-size:14px;padding:8px 18px;border:none;border-radius:6px;align-self:flex-end;&:hover{opacity:0.8;}}"])}}]);